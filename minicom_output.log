 

arceos# g test_xhci
[ 34.784499 0:2 driver_usb::host::xhci:49] resetting xhci controller
[ 34.789260 0:2 driver_usb::host::xhci:50] before reset:UsbStatusRegister { hc_halted: false, host_system_error: false, event_interrupt: false, port_change_detect: true, save_state_status: false, restore_state_status: false, save_restore_error: false, controller_not_ready: false, host_controller_error: false }
[ 34.817817 0:2 driver_usb::host::xhci:126] stop
[ 34.823546 0:2 driver_usb::host::xhci:131] wait until halt
[ 34.830230 0:2 driver_usb::host::xhci:133] halted
[ 34.836132 0:2 driver_usb::host::xhci:135] HCRST!
[ 34.842036 0:2 driver_usb::host::xhci:161] Reset xHCI Controller Globally
[ 34.850020 0:2 driver_usb::host::structures::xhci_slot_manager:65] max slot: 16
[ 34.858532 0:2 driver_usb::host::structures::xhci_slot_manager:84] initialized!
[ 34.867041 0:2 driver_usb::host::structures::scratchpad:61] initialized!
[ 34.874931 0:2 driver_usb::host::structures::scratchpad:55] initialized!
[ 34.882832 0:2 driver_usb::host::structures::xhci_roothub:94] number of ports:2
[ 34.891337 0:2 driver_usb::host::structures::xhci_roothub:99] allocating port 0
[ 34.899846 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: false, port_enabled_disabled: false, over_current_active: false, port_reset: false, port_link_state: 5, port_power: true, port_speed: 0, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: false, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 34.964249 0:2 driver_usb::host::structures::xhci_roothub:106] assert:0 == 0
[ 34.972494 0:2 driver_usb::host::structures::xhci_roothub:99] allocating port 1
[ 34.981002 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 35.045147 0:2 driver_usb::host::structures::xhci_roothub:106] assert:1 == 1
[ 35.053392 0:2 driver_usb::host::structures::xhci_roothub:110] ended
[ 35.060944 0:2 driver_usb::host::structures::xhci_roothub:120] initialized!
[ 35.069140 0:2 driver_usb::host::structures::xhci_command_manager:252] initialized!
[ 35.077956 0:2 driver_usb::host::structures::xhci_event_manager:43] initilizating!
[ 35.086757 0:2 driver_usb::host::structures::event_ring:33] created!
[ 35.094276 0:2 driver_usb::host::structures::xhci_event_manager:56] test
[ 35.102180 0:2 driver_usb::host::structures::xhci_event_manager:99] initialized!
[ 35.110767 0:2 driver_usb::host::xhci:65] before start:UsbStatusRegister { hc_halted: true, host_system_error: false, event_interrupt: false, port_change_detect: true, save_state_status: false, restore_state_status: false, save_restore_error: false, controller_not_ready: false, host_controller_error: false }
[ 35.139238 0:2 driver_usb::host::xhci:76] init completed!, coltroller state:UsbStatusRegister { hc_halted: false, host_system_error: false, event_interrupt: false, port_change_detect: true, save_state_status: false, restore_state_status: false, save_restore_error: false, controller_not_ready: false, host_controller_error: false }
[ 35.169620 0:2 driver_usb::host::xhci:85] port0 : false
[ 35.176042 0:2 driver_usb::host::xhci:85] port1 : true
[ 35.182377 0:2 driver_usb::host::xhci:95] initializing roothub
[ 35.189408 0:2 driver_usb::host::structures::xhci_roothub:43] initializing root ports
[ 35.198435 0:2 driver_usb::host::structures::xhci_roothub:48] initializing port 0
[ 35.207117 0:2 driver_usb::host::structures::root_port:24] port 0 not connected
[ 35.215621 0:2 driver_usb::host::structures::xhci_roothub:48] initializing port 1
[ 35.224303 0:2 driver_usb::host::structures::root_port:27] port 1 connected, continue
[ 35.233329 0:2 driver_usb::host::structures:113] reseting port 1
[ 35.240534 0:2 driver_usb::host::structures:115] before reset Port 1, status: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 35.305205 0:2 driver_usb::host::structures:134] Port 1 reset ok, status: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 35.369519 0:2 driver_usb::host::structures::root_port:31] port status PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 35.433578 0:2 driver_usb::host::structures::root_port:44] port speed: USBSpeedSuper
[ 35.442517 0:2 driver_usb::host::structures::root_port:46] initializing device: USBSpeedSuper
[ 35.452238 0:2 driver_usb::host::structures::xhci_usb_device:48] new device! port:1
[ 35.461105 0:2 driver_usb::host::structures::context:23] debug input: Input { control: InputControl { Drop Context flags: 0, Add Context flags: 0, configuration_value: 0, interface_number: 0, alternate_setting: 0 }, device: Device { slot: Slot { route_string: 0, speed: 0, multi_tt: false, hub: false, context_entries: 0, max_exit_latency: 0, root_hub_port_number: 0, number_of_ports: 0, parent_hub_slot_id: 0, parent_port_number: 0, tt_think_time: 0, interrupter_target: 0, usb_device_address: 0, slot_state: DisabledEnabled }, endpoints: [Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }, Endpoint { endpoint_state: Disabled, mult: 0, max_primary_streams: 0, linear_stream_array: false, interval: 0, max_endpoint_service_time_interval_payload_high: 0, error_count: 0, endpoint_type: NotValid, host_initiate_disable: false, max_burst_size: 0, max_packet_size: 0, dequeue_cycle_state: false, tr_dequeue_pointer: 0, average_trb_length: 0, max_endpoint_service_time_interval_payload_low: 0 }] } }
[ 36.586315 0:2 driver_usb::host::structures::root_port:49] writing ...
[ 36.594006 0:2 driver_usb::host::structures::xhci_usb_device:63] initialize/enum this device! port=1
[ 36.604336 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 36.668480 0:2 driver_usb::host::structures::xhci_usb_device:112] init input ctx
[ 36.677073 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.686711 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 36.750853 0:2 driver_usb::host::structures::xhci_usb_device:148] begin config endpoint 0 and assign dev!
[ 36.761618 0:2 driver_usb::host::structures::xhci_usb_device:151] config ep0
[ 36.769862 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.779498 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.789133 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.798767 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.808402 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.818037 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.827671 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.837306 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.846941 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.856576 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 36.866211 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 36.930355 0:2 driver_usb::host::structures::xhci_usb_device:226] assigning device into dcbaa, slot number= 0
[ 36.941466 0:2 driver_usb::host::structures::xhci_slot_manager:21] assign device: VA:0x9019f000 to dcbaa 0
[ 36.952317 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 37.016461 0:2 driver_usb::host::structures::xhci_command_manager:141] do command EnableSlot(EnableSlot { slot_type: 0, cycle_bit: false }) !
[ 37.030350 0:2 driver_usb::host::structures::xhci_command_manager:156] waiting for interrupt handler complete!
[ 37.041549 0:2 driver_usb::host::structures::xhci_event_manager:109] event handler has a trb:PortStatusChange(PortStatusChange { completion_code: Ok(Success), port_id: 2, cycle_bit: true })
[ 37.059601 0:2 driver_usb::host::structures::xhci_event_manager:139] step into port status change.

[ 37.069930 0:2 driver_usb::host::structures::root_port:65] port 1 status changed
[ 37.078525 0:2 driver_usb::host::structures::xhci_event_manager:109] event handler has a trb:PortStatusChange(PortStatusChange { completion_code: Ok(Success), port_id: 2, cycle_bit: true })
[ 37.096577 0:2 driver_usb::host::structures::xhci_event_manager:139] step into port status change.

[ 37.106906 0:2 driver_usb::host::structures::root_port:65] port 1 status changed
[ 37.115501 0:2 driver_usb::host::structures::xhci_event_manager:109] event handler has a trb:CommandCompletion(CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417590272, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true })
[ 37.140324 0:2 driver_usb::host::structures::xhci_event_manager:134] step into command completion.

[ 37.150654 0:2 driver_usb::host::structures::xhci_command_manager:210] handleing command complete:CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417590272, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true }
[ 37.174264 0:2 driver_usb::host::structures::xhci_command_manager:162] t o t a l success!
[ 37.183638 0:2 driver_usb::host::structures::xhci_usb_device:103] enable slot success! CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417590272, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true }
[ 37.206294 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 37.270438 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 37.280072 0:2 driver_usb::host::structures::xhci_usb_device:247] addressing device
[ 37.288926 0:2 driver_usb::host::structures::xhci_command_manager:105] addressing device!
[ 37.298300 0:2 driver_usb::host::structures::xhci_command_manager:141] do command AddressDevice(AddressDevice { input_context_pointer: 2417614848, block_set_address_request: false, slot_id: 1, cycle_bit: false }) !
[ 37.318526 0:2 driver_usb::host::structures::xhci_command_manager:156] waiting for interrupt handler complete!
[ 37.329723 0:2 driver_usb::host::structures::xhci_event_manager:109] event handler has a trb:CommandCompletion(CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417590288, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true })
[ 37.354547 0:2 driver_usb::host::structures::xhci_event_manager:134] step into command completion.

[ 37.364876 0:2 driver_usb::host::structures::xhci_command_manager:210] handleing command complete:CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417590288, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true }
[ 37.388486 0:2 driver_usb::host::structures::xhci_command_manager:162] t o t a l success!
[ 37.397860 0:2 driver_usb::host::structures::xhci_usb_device:270] addressed device at slot id 1
[ 37.407755 0:2 driver_usb::host::structures::xhci_usb_device:271] command result CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417590288, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true }
[ 37.429890 0:2 driver_usb::host::structures::xhci_usb_device:281] assert ep0 running!
[ 37.438917 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 37.448553 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 37.512697 0:2 driver_usb::host::structures::xhci_usb_device:449] get descriptor!
[ 37.521377 0:2 driver_usb::host::structures::xhci_usb_device:219] endpoint 0 state: Disabled
[ 37.531012 0:2 driver_usb::host::structures::xhci_usb_device:468] doorbell id: 1
[ 37.539607 0:2 driver_usb::host::structures::xhci_usb_device:415] doorbell ing
[ 37.548026 0:2 driver_usb::host::structures::xhci_event_manager:109] event handler has a trb:TransferEvent(TransferEvent { completion_code: Ok(EndpointNotEnabledError), trb_pointer: 0, trb_transfer_length: 0, event_data: false, endpoint_id: 1, slot_id: 1, cycle_bit: true })
[ 37.573457 0:2 driver_usb::host::structures::xhci_event_manager:112] event = TransferEvent { completion_code: Ok(EndpointNotEnabledError), trb_pointer: 0, trb_transfer_length: 0, event_data: false, endpoint_id: 1, slot_id: 1, cycle_bit: true }
[ 37.596198 0:2 driver_usb::host::structures::xhci_event_manager:113] step into transfer event

[ 37.606093 0:2 driver_usb::host::structures::xhci_slot_manager:47] transfer event! param: EndpointNotEnabledError,TransferEvent { completion_code: Ok(EndpointNotEnabledError), trb_pointer: 0, trb_transfer_length: 0, event_data: false, endpoint_id: 1, slot_id: 1, cycle_bit: true }
[ 37.632047 0:2 driver_usb::host::structures::xhci_slot_manager:53] failed, code:EndpointNotEnabledError
[ 37.642636 0:2 driver_usb::host::structures::xhci_usb_device:441] interrupt handler complete! result = Ok([0, 0, 201326592, 16875521])
[ 37.655917 0:2 driver_usb::host::structures::xhci_usb_device:491] getted! buffer:Device { len: 0, descriptor_type: 0, cd_usb: 0, class: 0, subclass: 0, protocol: 0, max_packet_size0: 0, vendor: 0, product_id: 0, device: 0, manufacture: 0, product: 0, serial_number: 0, num_configurations: 0 }
[ 37.682911 0:2 driver_usb::host::structures::xhci_usb_device:541] return!
[ 37.690897 0:2 driver_usb::host::structures::xhci_usb_device:78] get desc: Device { len: 0, descriptor_type: 0, cd_usb: 0, class: 0, subclass: 0, protocol: 0, max_packet_size0: 0, vendor: 0, product_id: 0, device: 0, manufacture: 0, product: 0, serial_number: 0, num_configurations: 0 }
[ 37.717372 0:2 driver_usb::host::structures:101] ----dumped port state: PortStatusAndControlRegister { current_connect_status: true, port_enabled_disabled: true, over_current_active: false, port_reset: false, port_link_state: 0, port_power: true, port_speed: 4, port_indicator_control: Off, port_link_state_write_strobe: false, connect_status_change: false, port_enabled_disabled_change: false, warm_port_reset_change: false, over_current_change: false, port_reset_change: true, port_link_state_change: false, port_config_error_change: false, cold_attach_status: false, wake_on_connect_enable: false, wake_on_disconnect_enable: false, wake_on_over_current_enable: false, device_removable: false, warm_port_reset: false }
[ 37.781517 0:2 axruntime::lang_items:5] panicked at /home/dbydd/.cargo/git/checkouts/bitmap-allocator-98b9ef9bd0253b32/88e871a/src/lib.rs:93:9:
index out of bounds: the len is 16 but the index is 1048575
[ 37.800873 0:2 axhal::platform::aarch64_phytium_pi::misc:22] Shutting down...
